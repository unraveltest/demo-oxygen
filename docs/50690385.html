
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:whc="http://www.oxygenxml.com/webhelp/components" xml:lang="en-us" lang="en-us">
    <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="Unravel 4.0-4.1 Unravel 4.0-4.1 Installation Guide for MapR Introduction This topic explains how to deploy Unravel Server 4.0 on the MapR converged data platform . These instructions apply to Unravel ..." /><meta charset="UTF-8" /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.Type" content="task" /><meta name="DC.Relation" scheme="URI" content="Installation-Guide-for-MapR_50961894.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="FAGJADIF" /><meta name="DC.Language" content="en-us" /><title>Part 1: Install Unravel Server on MapR</title><!--  Generated with Oxygen version 20.1-SNAPSHOT, build number 2018122203.  --><meta name="wh-path2root" content="" /><meta name="wh-toc-id" content="FAGJADIF-d66e88" /><link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css" /><link rel="stylesheet" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap-theme.min.css" /><link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css" /><link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2018122203" /><script type="text/javascript" src="./oxygen-webhelp/lib/jquery/jquery-3.1.1.min.js"><!----></script><script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/oxygen.css?buildId=2018122203" /></head>

    <body id="FAGJADIF" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">Jump to main content</a>
        <!-- EXM-36950 - Expand the args.hdr parameter here -->
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <!--
                            This component will be generated when the next parameters are specified in the transformation scenario:
                            'webhelp.logo.image' and 'webhelp.logo.image.target.url'.
                            See: http://oxygenxml.com/doc/versions/17.1/ug-editor/#topics/dita_webhelp_output.html.
                    -->
                    
                    <div class=" wh_publication_title "><a href="index.html"><span class="booktitle">  <span class="ph mainbooktitle">un40</span>  </span></a></div>
                    
                </div>
                
                <!-- The menu button for mobile devices is copied in the output only when the 'webhelp.show.top.menu' parameter is set to 'yes' -->
                <button type="button" data-target="#wh_top_menu_and_indexterms_link" id="wh_menu_mobile_button" data-toggle="collapse" class="navbar-toggle collapsed wh_toggle_button" aria-expanded="false" aria-label="Toggle menu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                <nav class=" wh_top_menu "><ul>
   <li class="has-children"><span data-tocid="FAGIICFE-d66e14" data-state="not-ready" class=" topicref " data-id="FAGIICFE"><span class="title"><a href="50688254.html">Installation Guide for Cloudera Distribution Including Apache Hadoop (CDH), with Cloudera Manager (CM) </a></span></span></li>
   <li class="has-children"><span data-tocid="FAGIIEED-d66e47" data-state="not-ready" class=" topicref " data-id="FAGIIEED"><span class="title"><a href="50688443.html">Installation Guide for Hortonworks Data Platform (HDP) </a></span></span></li>
   <li class="has-children"><span data-tocid="Installation-Guide-for-MapR_50961894-d66e80" data-state="not-ready" class=" topicref " data-id="Installation-Guide-for-MapR_50961894"><span class="title"><a href="Installation-Guide-for-MapR_50961894.html"> Unravel 4.0-4.1 : Installation Guide for MapR </a></span></span></li>
   <li class="has-children"><span data-tocid="FAGIIGCH-d66e113" data-state="not-ready" class=" topicref " data-id="FAGIIGCH"><span class="title"><a href="50688627.html">Installation Guide for Amazon Elastic MapReduce (Amazon EMR) and Qubole Clusters </a></span></span></li>
   <li><span data-tocid="FDBGHACF-d66e163" data-state="leaf" class=" topicref " data-id="FDBGHACF"><span class="title"><a href="53167025.html">Setting Up Auto Actions (Alerts) </a></span></span></li>
   <li><span data-tocid="tocId-d66e172" data-state="leaf" class=" topicref "><span class="title"><a href="53900010.html">***</a></span></span></li>
</ul></nav>
                
                
            </div>
        </div>
    </div>
</header>
        
        <div class=" wh_search_input "><form id="searchForm" method="get" role="search" action="search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" /><button type="submit" class="wh_search_button" aria-label="Search"><span>Search</span></button></div><script><!--
                                    $(document).ready(function () {
                                        $('#searchForm').submit(function (e) {
                                            if ($('.wh_search_textfield').val().length < 1) {
                                                e.preventDefault();
                                            }
                                        });
                                    });
                                --></script></form></div>
        
        <div class="container-fluid">
            <div class="row">

                <nav class="wh_tools hidden-print">
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol xmlns:html="http://www.w3.org/1999/xhtml" class="hidden-print"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li>
   <li><span class="topicref" data-id="Installation-Guide-for-MapR_50961894"><span class="title"><a href="Installation-Guide-for-MapR_50961894.html"> Unravel 4.0-4.1 : Installation Guide for MapR </a></span></span></li>
   <li class="active"><span class="topicref" data-id="FAGJADIF"><span class="title"><a href="50690385.html">Part 1: Install Unravel Server on MapR </a></span></span></li>
</ol></div>

                    <div class="wh_right_tools hidden-sm hidden-xs">
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  </span></div>
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        <div class=" wh_print_link print "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                    </div>
                </nav>
            </div>

            <div class="wh_content_area">
                <div class="row">
                    
                        <nav role="navigation" id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-3 hidden-xs navbar hidden-print">
                            <div class=" wh_publication_toc " data-tooltip-position="right"><ul role="tree" aria-label="Table of Contents"><span class="expand-button-action-labels"><span id="button-expand-action" aria-label="Expand"></span><span id="button-collapse-action" aria-label="Collapse"></span><span id="button-pending-action" aria-label="Pending"></span></span><li role="treeitem" aria-expanded="true"><span data-tocid="Installation-Guide-for-MapR_50961894-d66e80" class="topicref" data-id="Installation-Guide-for-MapR_50961894" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action Installation-Guide-for-MapR_50961894-d66e80-link" class="wh-expand-btn"></span><span class="title"><a href="Installation-Guide-for-MapR_50961894.html" id="Installation-Guide-for-MapR_50961894-d66e80-link"> Unravel 4.0-4.1 : Installation Guide for MapR </a></span></span><ul role="group" class="nav nav-list"><span class="expand-button-action-labels"><span id="button-expand-action" aria-label="Expand"></span><span id="button-collapse-action" aria-label="Collapse"></span><span id="button-pending-action" aria-label="Pending"></span></span><li role="treeitem" class="active"><span data-tocid="FAGJADIF-d66e88" class="topicref" data-id="FAGJADIF" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="50690385.html" id="FAGJADIF-d66e88-link">Part 1: Install Unravel Server on MapR </a></span></span></li>
         <li role="treeitem"><span data-tocid="FAGIIDCG-d66e96" class="topicref" data-id="FAGIIDCG" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="50688326.html" id="FAGIIDCG-d66e96-link">Part 2: Enable Additional Data Collection / Instrumentation for MapR </a></span></span></li>
         <li role="treeitem"><span data-tocid="FBCBDAGF-d66e104" class="topicref" data-id="FBCBDAGF" data-state="leaf"><span role="button" class="wh-expand-btn"></span><span class="title"><a href="51213065.html" id="FBCBDAGF-d66e104-link">Part 3: AdditionalTopics for MapR </a></span></span></li>
      </ul>
   </li>
</ul></div>
                        </nav>
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-12" id="wh_topic_body">
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Part 1: Install Unravel Server on MapR </h1>
   <div class="body taskbody">
      <section class="section context">
         <ol class="ol">

            <li class="li first">
               <span class="ph">
                  <a class="xref" href="index.html">Unravel 4.0-4.1</a>
               </span>
            </li>

            <li class="li">
               <span class="ph">
                  <a class="xref" href="Unravel-4.0-4.1_50672724.html">Unravel 4.0-4.1</a>
               </span>
            </li>

            <li class="li">
               <span class="ph">
                  <a class="xref" href="Installation-Guide-for-MapR_50961894.html">Installation Guide for
                     MapR</a>
               </span>
            </li>

         </ol>
         <p class="p"></p>
         <p class="p">Introduction</p>
         <p class="p">This topic explains how to <span class="ph">deploy Unravel Server 4.0 on the MapR converged data
               platform</span>. These instructions apply to Unravel Server 4.0. For older versions of
            Unravel Server, contact Unravel Support.</p>
         <strong class="ph b">Workflow Summary</strong>
         <ol class="ol">

            <li class="li">Pre-installation check</li>

            <li class="li">Configure the host machine.</li>

            <li class="li">Install the Unravel Server RPM on the host machine.</li>

            <li class="li">
               <p class="p">Configure Unravel Server (basic/core options).</p>
            </li>

            <li class="li">Log into Unravel Web UI.</li>

            <li class="li">(Optional) Configure Unravel Server (advanced options).</li>

         </ol>
         <strong class="ph b">Table of Contents</strong>
         <ul class="ul toc-indentation">

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Introduction">Introduction</a>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Pre-InstallationCheck">Pre-Installation Check</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-PlatformCompatibility">Platform Compatibility</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Hardware">Hardware</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Software">Software</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-AccessPermissions">Access Permissions</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Network">Network</a>
                  </li>

               </ul>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-1.ConfiguretheHostMachine">1.
                  Configure the Host Machine</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-AllocateaClusterGateway/Edge/ClientHostwithHDFSAccess">Allocate a Cluster Gateway/Edge/Client Host with HDFS Access</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-ConfiguretheHostBeforeinstallingtheRPM">Configure the Host Before installing the RPM</a>
                  </li>

               </ul>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-2.InstalltheUnravelServerRPMontheHostMachine">2. Install the Unravel Server RPM on the Host Machine</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-GettheUnravelServerRPM">Get the Unravel Server RPM</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-InstalltheUnravelServerRPM">Install the Unravel Server RPM</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-DoHost-SpecificPost-InstallationActions">Do Host-Specific Post-Installation Actions</a>
                  </li>

               </ul>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-3.ConfigureUnravelServer(Basic/CoreOptions)">3. Configure Unravel Server (Basic/Core Options)</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Enable/DisableOptionalDaemons">Enable/Disable Optional Daemons</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Modifyunravel.properties">Modify unravel.properties</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-IfKerberosisEnabled:">If
                        Kerberos is Enabled:</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-IfSentryisEnabled:">If
                        Sentry is Enabled:</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-DoHost-SpecificConfigurationSteps">Do Host-Specific Configuration Steps</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-RestartUnravelServer">Restart Unravel Server</a>
                  </li>

               </ul>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-4.LogintoUnravelWebUI">4. Log
                  into Unravel Web UI</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-Congratulations!">Congratulations!</a>
                  </li>

               </ul>
            </li>

            <li class="li">
               <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-5.(Optional)ConfigureUnravelServer(AdvancedOptions)">5. (Optional) Configure Unravel Server (Advanced Options)</a>
               <ul class="ul toc-indentation">

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-EnableAdditionalDataCollection/Instrumentation">Enable Additional Data Collection/Instrumentation</a>
                  </li>

                  <li class="li">
                     <a class="xref" href="#FAGJADIF__Part1:InstallUnravelServeronMapR-RuntheUnravelWebUIConfigurationWizard">Run the Unravel Web UI Configuration Wizard</a>
                  </li>

               </ul>
            </li>

         </ul>
         <p class="p">Pre-Installation Check</p>
         <p class="p">The following installation requirements must be met for successful installation of
            Unravel.</p>
         <p class="p">Platform Compatibility</p>
         <ul class="ul">

            <li class="li">MapR 5.1</li>

            <li class="li">Hadoop 1.x - 2.x</li>

            <li class="li">Kerberos</li>

            <li class="li">Hive 0.9.x - 1.2.x</li>

            <li class="li">Spark 1.3.x - 2.0.x</li>

         </ul>
         <p class="p">Hardware</p>
         <ul class="ul">

            <li class="li">Architecture: x86_64</li>

            <li class="li">Cores: 8</li>

            <li class="li">RAM: 64GB minimum</li>

            <li class="li">Disk: <code class="ph codeph">/usr/local/unravel</code> with 2.5GB free minimum</li>

            <li class="li">Disk: <code class="ph codeph">/srv/unravel</code> with 500GB free minimum</li>

            <li class="li">For 10,000+ MR jobs per day, two or more gateway/edge nodes are recommended</li>

         </ul>
         <p class="p">Software</p>
         <ul class="ul">

            <li class="li">Operating System: RedHat/Centos 6.4 - 7.3</li>

            <li class="li">
               <code class="ph codeph">libaio.x86_64</code> installed</li>

            <li class="li">
               <code class="ph codeph">SELINUX=permissive</code> (or disabled) should be set in
                  <code class="ph codeph">/etc/selinux/config</code>
            </li>

            <li class="li">HDFS+Hive+YARN client/gateway, Hadoop and Hive commands in <code class="ph codeph">PATH</code>
            </li>

            <li class="li">If Spark is in use, Spark client gateway</li>

            <li class="li">LDAP (AD or Open LDAP) compatible for Unravel Web UI user authentication (Open
               signup by default)</li>

            <li class="li">On Unravel Edge-node server, please <strong class="ph b">
                  <u class="ph u">do not</u>
               </strong> have zookeeper installed in same server</li>

         </ul>
         <p class="p">Access Permissions</p>
         <ul class="ul">

            <li class="li">If Kerberos is in use, a keytab for principal hdfs (or read-only equivalent) is
               required for access to:<ul class="ul">

                  <li class="li">Access to YARN’s “done dir” in HDFS</li>

                  <li class="li">Access to YARN’s log aggregation directory in HDFS</li>

                  <li class="li">Access to Spark event log directory in HDFS</li>

                  <li class="li">Access to file sizes under HIve warehouse directory</li>

               </ul>
            </li>

            <li class="li">Access to YARN Resource Manager REST API
               <ul class="ul">

                  <li class="li">principal needs right to find out which RM is active</li>

               </ul>
            </li>

            <li class="li">JDBC access to the Hive Metastore (read-only user is sufficient)</li>

         </ul>
         <p class="p">Network</p>
         <ul class="ul">

            <li class="li">Port 3000 (or 4020) from users and entire cluster to Unravel Web UI</li>

            <li class="li">HDFS ports open from Hadoop cluster to Unravel Server(s)</li>

            <li class="li">For MR1, TaskTracker port open from Hadoop cluster to Unravel Server(s)</li>

            <li class="li">For MR1/YARN, Hive Metadata DB port open to Unravel Server(s) for partition
               reporting</li>

            <li class="li">UDP and TCP port 4043 open from entire cluster to Unravel Server(s)</li>

            <li class="li">For Oozie, port 11000 open from Unravel Server(s) to the Oozie server</li>

            <li class="li">Resource Manager (RM) port 8032 from Unravel Server(s) to the RM server(s)</li>

            <li class="li">
               <span class="ph">Port 4176, 4181 through 4189, 3316, 4091 must be available for localhost
                  communication between Unravel daemons or services</span>
            </li>

         </ul>
         <p class="p"></p>
         <p class="p">1. Configure the Host Machine</p>
         <p class="p">Allocate a Cluster Gateway/Edge/Client Host with HDFS Access</p>
         <p class="p">Install <code class="ph codeph">mapr-client</code> to enable the <code class="ph codeph">hadoop fs</code>
            command.</p>
         <p class="p">Configure the Host <em class="ph i">Before </em>installing the RPM</p>
         <ul class="ul">

            <li class="li">
               <p class="p">Run the following commands on Unravel Server as <code class="ph codeph">root</code>:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo useradd -g mapr unravel
hadoop fs -mkdir /user/unravel
hadoop fs -chown unravel:mapr /user/unravel</code></pre>
            </li>

            <li class="li">If MapR tickets are enabled, check mapr ticket for users <code class="ph codeph">unravel</code>
               and <code class="ph codeph">mapr</code> on target host now. You might need to export ticket
               environment variables in <code class="ph codeph">/etc/unravel_ctl</code> first.</li>

            <li class="li">
               <p class="p">Check available RAM to ensure availability:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>free -g</code></pre>
            </li>

         </ul>
         <ul class="ul">

            <li class="li">
               <p class="p">For instructions on adjusting RAM allocated to MapR-FS (mfs), see <a class="xref external-link" href="https://community.mapr.com/docs/DOC-1209" target="_blank">https://community.mapr.com/docs/DOC-1209</a>.
                  For example, edit  <code class="ph codeph">/opt/mapr/conf/warden.conf</code> as follows:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>service.command.mfs.heapsize.maxpercent=10</code></pre>
               <p class="p">(only change this setting on the Unravel gateway/client machine). And the restart
                  mfs.</p>
            </li>

         </ul>
         <p class="p">2. Install the Unravel Server RPM on the Host Machine</p>
         <p class="p">Get the Unravel Server RPM</p>
         <p class="p">Copy the RPM from the Unravel distribution server to the host machine using the username
            and password given to you by Unravel Support:</p>
         <ul class="ul">

            <li class="li">
               <p class="p auto-cursor-target">For the free trial version:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>scp "unraveltrial@trial.unraveldata.com:unravel-4.0-*.x86_64.rpm" .</code></pre>
            </li>

            <li class="li">For the enterprise version:
               <pre class="pre codeblock syntaxhighlighter-pre"><code>scp $USER@dist.unraveldata.com:unravel-4.0-*.x86_64.rpm.$timestamp .</code></pre>
            </li>

         </ul>
         <p class="p">The precise RPM filename will vary. The version has the structure <em class="ph i">
               <code class="ph codeph">x.y.b</code>
            </em> where <em class="ph i">
               <code class="ph codeph">b</code>
            </em> is a build number that is imposed as an RPM epoch which means it takes precedence
            over version numbers for determining what is more up-to-date. The Unravel build numbers
            always increase and are allocated so that they respect the ordering of <em class="ph i">
               <code class="ph codeph">x.y</code>
            </em> versioning.</p>
         <p class="p"></p>
         <p class="p">Install the Unravel Server RPM</p>
         <p class="p">Replace the asterisks as needed to be more selective.</p>
         <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo rpm -U unravel-4.0*.x86_64.rpm*</code></pre>
         <span class="ph aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
         <p class="p">The installation creates <code class="ph codeph">/usr/local/unravel/</code> which contains the
            executables, scripts, and settings. User <code class="ph codeph">unravel</code> is created. The
            initial internal database and other durable state are put
               in <code class="ph codeph">/srv/unravel/</code> for larger storage. By default, the installation
            supports YARN.
            
            The master configuration file is
               in <code class="ph codeph">/usr/local/unravel/etc/unravel.properties</code> and the logs are in
               <code class="ph codeph">/usr/local/unravel/logs/</code>. The RPM installation creates
               user <code class="ph codeph">unravel</code> if it does not already
               exist; <code class="ph codeph">/etc/init.d/unravel_*</code> scripts for controlling its services as
            well as <code class="ph codeph">/etc/init.d/unravel_all.sh</code> which can be used to manually stop,
            start, and get status of all daemons in proper order.
            
            The RPM installation also creates an HDFS directory for Hive Hook information
            collection.
            
            During initial install, a bundled database is used. This can be switched to use an
            externally managed MySQL for production. (The bundled database root mysql password will
            be stored in <code class="ph codeph">/root/unravel.install.include</code> during installation.)</p>
         <p class="p">
            <span class="ph">Do Host-Specific Post-Installation Actions</span>
         </p>
         <p class="p">Run the following commands on Unravel Server:</p>
         <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo /etc/init.d/unravel_all.sh stop
sudo /usr/local/unravel/install_bin/switch_to_mapr.sh</code></pre>
         <p class="p">3. Configure Unravel Server (Basic/Core Options)</p>
         <p class="p">Enable/Disable Optional Daemons</p>
         <p class="p">Depending on your workload volume or kind of activity, you can enable or disable
            optional daemons at this point.</p>
         <ul class="ul">

            <li class="li">
               <p class="p">If you are not using Oozie, disable <code class="ph codeph">unravel_os3</code>:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo chkconfig unravel_os3 off</code></pre>
            </li>

            <li class="li">
               <p class="p">If you are not using Spark, disable <code class="ph codeph">unravel_sw</code>:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo chkconfig unravel_sw off</code></pre>
            </li>

            <li class="li">
               <p class="p">If you have 10000-20000 jobs per day, enable these workers:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo chkconfig --add unravel_ew_2 
sudo chkconfig --add unravel_hhw_2 
sudo chkconfig --add unravel_jcw2_2</code></pre>
            </li>

            <li class="li">
               <p class="p">If you have 20000-30000 jobs per day, enable these workers:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo chkconfig --add unravel_ew_3 
sudo chkconfig --add unravel_hhw_3 
sudo chkconfig --add unravel_jcw2_3</code></pre>
            </li>

            <li class="li">
               <p class="p">If you have more than 30000 jobs per day, enable these workers:</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo chkconfig --add unravel_ew_4 
sudo chkconfig --add unravel_hhw_4 
sudo chkconfig --add unravel_jcw2_4</code></pre>
            </li>

         </ul>
         <p class="p">Modify <code class="ph codeph">unravel.properties</code>
         </p>
         <p class="p"></p>
         <ul class="ul">

            <li class="li">
               <p class="p">Open <span class="ph">
                     <code class="ph codeph">/usr/local/unravel/etc/unravel.properties</code>
                  </span> with <code class="ph codeph">vi</code>.</p>
               <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo vi /usr/local/unravel/etc/unravel.properties</code></pre>
            </li>

            <li class="li">Edit the values in <span class="ph">
                  <code class="ph codeph">unravel.properties</code>
               </span> using the guidelines and descriptions in the table below. Some of these need to
               be uncommented (remove the leading # char) after you edit to enable them.</li>

         </ul>
         <table class="table wrapped confluenceTable"><caption></caption><colgroup><col /><col /><col /></colgroup><tbody class="tbody">
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">com.unraveldata.advertised.url</code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Defines the
                        Unravel Server URL for HTTP traffic.</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.advertised.url=http://LAN_DNS:3000</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">com.unraveldata.customer.organization</code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Identifies your
                        installation for reporting purposes.</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.customer.organization=Company_and_org</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.tmpdir</code></pre>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Location where
                        Unravel's temp file will reside</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.tmpdir=/srv/unravel/tmp</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">com.unraveldata.history.maxSize.weeks</code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Sets retention
                        for search data.</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.history.maxSize.weeks=26</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">com.unraveldata.hive.hook.topic.num.threads</code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">
                        <strong class="ph b">Optional</strong>. Defines the number of threads. Default is 1. Depending on
                        job volume, increase this property to <em class="ph i">N</em> where <em class="ph i">N</em> is between 1
                        and 4, or roughly <em class="ph i">ThousandJobsPerDay</em>/10.</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.hive.hook.topic.num.threads=1</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">
                           <span class="ph">com.unraveldata.job.collector.done.log.base</span>
                        </code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">HDFS path to
                        "done" directory of MR logs</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.job.collector.done.log.base=/var/mapr/cluster/yarn/rm/staging/history/done</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">
                           <span class="ph">
                              <span class="ph">
                                 <code class="ph codeph">com.unraveldata.job.collector.log.aggregation.base</code>
                              </span>
                           </span>
                        </code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">An HDFS path
                        that helps locate MR job logs to process</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.job.collector.log.aggregation.base=/tmp/logs/*/logs/</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">com.unraveldata.login.admins</code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Defines the
                        usernames that can access Unravel Web UI's admin pages. Default is
                           <code class="ph codeph">admin</code>.</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.login.admins=admin</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">
                           <span class="ph">com.unraveldata.spark.eventlog.location</span>
                        </code>
                        <span class="ph"></span>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Where to find
                        Spark event logs</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>com.unraveldata.spark.eventlog.location=maprfs:///apps/spark</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">
                           <span class="ph">
                              <span class="ph">yarn.resourcemanager.webapp.address</span>
                           </span>
                        </code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Resource Manager
                        web app address</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>yarn.resourcemanager.webapp.address=http://example.localdomain:8088</code></pre>
                     </td>

                  </tr>
                  <tr>

                     <td class="entry confluenceTd" colspan="1">
                        <code class="ph codeph">
                           <span class="ph">oozie.server.url</span>
                        </code>
                     </td>

                     <td class="entry confluenceTd" colspan="1">Oozie
                        URL</td>

                     <td class="entry confluenceTd" colspan="1">
                        <pre class="pre codeblock"><code>oozie.server.url=http://example.localdomain<a class="xref external-link" href="http://ip-10-0-0-90.ec2.internal:11000/oozie" target="_blank">:11000/oozie</a>
                        </code></pre>
                     </td>

                  </tr>
               </tbody></table>
         <p class="p">If Kerberos is Enabled:</p>
         <span class="ph expand-control-icon">
            <img class="image expand-control-image" src="images/icons/grey_arrow_down.png" />
         </span>
         <span class="ph expand-control-text">Add authentication for HDFS...</span>
         <p class="p">(a) Create a keytab for unravel for daemons that run as <code class="ph codeph">unravel</code> and put
            the file in <code class="ph codeph">/usr/local/unravel/etc/unravel.keytab</code> (for example).</p>
         <p class="p">(b) Create a keytab for hdfs for the Unravel daemons that run as user
               <code class="ph codeph">hdfs</code> and put the file in <code class="ph codeph">/etc/keytabs/hdfs.keytab</code>
            (for example).</p>
         <p class="p">(c) Tell Unravel Server about it (env var for hdfs keytab location; substitute correct
            hostname):</p>
         <pre class="pre codeblock syntaxhighlighter-pre"><code>echo "export HDFS_KEYTAB_PATH=/etc/keytabs/hdfs.keytab 
export HDFS_KERBEROS_PRINCIPAL=unravel/myhost.mydomain@MYREALM 
" | sudo tee -a /usr/local/unravel/etc/unravel.ext.sh </code></pre>
         <p class="p">(d) Add properties for Kerberos:</p>
         <pre class="pre codeblock syntaxhighlighter-pre"><code>echo "
com.unraveldata.kerberos.principal=unravel/myhost.mydomain@MYREALM
com.unraveldata.kerberos.keytab.path=/usr/local/unravel/etc/unravel.keytab
" | sudo tee -a /usr/local/unravel/unravel.properties

</code></pre>
         <p class="p">If Sentry is Enabled:</p>
         <span class="ph expand-control-icon">
            <img class="image expand-control-image" src="images/icons/grey_arrow_down.png" />
         </span>
         <span class="ph expand-control-text">Add these permissions...</span>
         <table class="table wrapped confluenceTable"><caption></caption><colgroup><col /><col /><col /></colgroup><tbody class="tbody">
                  <tr>

                     <td class="entry confluenceTd">
                        <code class="ph codeph">hdfs://user/unravel/HOOK_RESULT_DIR</code>
                     </td>

                     <td class="entry confluenceTd">*</td>

                     <td class="entry confluenceTd">read+write</td>

                  </tr>
               </tbody></table>
         <p class="p">Do Host-Specific Configuration Steps</p>
         <p class="p">
            <span class="ph">For MapR, there are no host-specific configuration steps.</span>
         </p>
         <p class="p">Restart Unravel Server</p>
         <p class="p">After edits to <code class="ph codeph">com.unraveldata.login.admins</code> in
               <code class="ph codeph">/usr/local/unravel/etc/unravel.properties</code> it is necessary to run the
            following script in order to make changes take effect. The <code class="ph codeph">echo</code> command
            shows the page to visit with your browser. If you are using an ssh tunnel or http proxy,
            you might need to make adjustments.</p>
         <pre class="pre codeblock syntaxhighlighter-pre"><code>sudo /etc/init.d/unravel_all.sh start
sleep 60
 echo "http://$(hostname -f):3000/"</code></pre>
         <p class="p">This completes the basic/core configuration.</p>
         <p class="p"></p>
         <p class="p">4. Log into Unravel Web UI</p>
         <p class="p">Using a web browser, navigate to <code class="ph codeph">
               <span class="ph nolink">http://($hostname</span> -f):3000</code> and login as user
               "<code class="ph codeph">admin"</code> with password <code class="ph codeph">"unraveldata</code>".</p>
         <span class="ph aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
         <p class="p">For the free trial version, use the Chrome web browser.</p>
         <p class="p">
            <span class="ph confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size">
               <img class="image confluence-embedded-image image-center" src="media/50966732.png" />
            </span>
         </p>
         <p class="p">
            <em class="ph i">Unravel Web UI Login Screen</em>
         </p>
         <p class="p">Congratulations!</p>
         <p class="p">Unravel Server is up and running. Unravel Web UI displays collected data. Check Unravel
            Web UI for MR jobs loading: on the <strong class="ph b">Applications</strong> page, select the <strong class="ph b">Map
               Reduce</strong> tab.</p>
         <p class="p">For instructions on using Unravel Web UI, see the <a class="xref" href="User-Guide_50687944.html">User Guide</a>.</p>
         <p class="p">5. (Optional) Configure Unravel Server (Advanced Options)</p>
         <p class="p">Enable Additional Data Collection/Instrumentation</p>
         <p class="p">Install the Unravel Sensor Parcel on gateway/edge/client nodes that are used to submit
            Hive queries to push additional information to Unravel Server. For details, see <a class="xref" href="50688326.html">Part 2: Enable Additional Data Collection / Instrumentation for
               MapR</a>.</p>
         <p class="p">Run the Unravel Web UI Configuration Wizard</p>
         <p class="p">Run the Unravel Web UI configuration wizard to choose additional configuration options.
            For instructions on configuring advanced options, see the <a class="xref" href="https://unraveldata.atlassian.net/wiki/display/UN40/COMING+SOON%3A+Unravel+Web+UI+User+Guide" target="_blank">Unravel Web UI User Guide</a>.</p>
         <p class="p">Attachments:</p>
         <img class="image" src="images/icons/bullet_blue.gif" alt="" />
         <a class="xref" href="media/logo.png">worddav95f1e8fd13958fae391afc8e6f9ad03d.png</a> (image/png) 
         <br /><img class="image" src="images/icons/bullet_blue.gif" alt="" /><br />
         <a class="xref" href="media/50966732.png">image2017-2-26_0-20-12.png</a> (image/png) 
         <br /><img class="image" src="images/icons/bullet_blue.gif" alt="" /><br />
         <a class="xref" href="media/51089164.png">logo_small.png</a> (image/png)
         
      </section>
   </div>
</article></main></div>
                        
                        
                        <!--
    
Oxygen WebHelp Plugin
Copyright (c) 1998-2018 Syncro Soft SRL, Romania.  All rights reserved.

--><div id="wh_feedback">
    <div id="cmts"><!----></div>
    
    <script type="text/javascript" src="./oxygen-webhelp/feedback/config/config.js"><!----></script>
    <script type="text/javascript" src="./oxygen-webhelp/feedback/resources/js/parseuri.js"><!----></script>
    <script type="text/javascript" src="./oxygen-webhelp/feedback/resources/localization/strings.js"><!----></script>
    <script type="text/javascript" src="./oxygen-webhelp/feedback/resources/js/init.js"><!----></script>
    <script type="text/javascript">
        function showCommentsFor(page) {
           console.log('showCommentsFor(' + page + ')');
           init(page, $('#cmts'));
           
           return false;
        }
        
        var pageLocation = window.location.href;
        try {
            var p = parseUri(pageLocation);
            console.log(p);
            showCommentsFor(p.path);
        } catch (e) {
            debug(e);
        }
    </script>
</div>
                    </div>
                    
                </div>
            </div>
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container text-center ">
    Generated by <a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank">&lt;oXygen/&gt; XML WebHelp</a> - Trial Edition
  </div>
</footer>
        
        <div id="go2top">
            <span class="glyphicon glyphicon-chevron-up"></span>
        </div>
        
        <!-- The modal container for images -->
        <div id="modal_img_large" class="modal">
            <span class="close glyphicon glyphicon-remove"></span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="modal-img" />
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>
        </div>
        
        <script src="./oxygen-webhelp/lib/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
        
    </body>
</html>