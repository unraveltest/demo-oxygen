<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task
  PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd" >
<task xml:lang="en-us" id="Running-Verification-Scripts-and-Benchmarks_52960296">
   <title>Running Verification Scripts and Benchmarks </title>
   <taskbody>
      <context>
         <p>
            <ph>This topic explains how to run verification tests and benchmarks after you install or upgrade Unravel
               Server. </ph>
         </p>
         <p>
            <ph>Why Run Verification Tests or Benchmarks?</ph>
         </p>
         <ul>
            <li>
               <p>
                  <ph>Verification tests highlight the value of Unravel’s application performance management/analysis.
                  </ph>
               </p>
            </li>
         </ul>
         <ul>
            <li>
               <p>
                  <ph>Benchmarks verify that Unravel features are working correctly.</ph>
               </p>
            </li>
         </ul>
         <p>
            <ph>Running Verification Tests (“Smoke Tests”)</ph>
         </p>
         <p>
            <ph>Currently, we provide smoke tests for Spark jobs only. Please follow the instructions in the section
               that matches your deployment.</ph>
         </p>
         <p>
            <ph>CDH </ph>
         </p>
         <ul>
            <li>
               <p>
                  <ph>On your Unravel Server host, run the </ph>
                  <ph>spark_test_via_parcel.sh</ph>
                  <ph> script. This script runs a Spark app. It’s a good way to verify that Unravel Server captures the
                     data (events) generated by the Spark app, even before you install and configure Unravel Sensor. You
                     should be able to see the data generated by this Spark app on Unravel Web UI. </ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">/usr/local/unravel/install_bin/spark_test_via_parcel.sh --unravel-server &lt;unravel_host_IP_address&gt;</codeblock>
            </li>
         </ul>
         <p>
            <ph>Note: You can run this script without installing and configuring Unravel Sensor.</ph>
         </p>
         <p/>
         <ul>
            <li>
               <p>
                  <ph>After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel Server host to
                     verify that the sensor is installed and configured correctly:</ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">/opt/cloudera/parcels/CDH/lib/spark/bin/spark-submit \
--class org.apache.spark.examples.SparkPi \
--deploy-mode client \
--master yarn \
/opt/cloudera/parcels/CDH/lib/spark/examples/lib/spark-examples-*.jar 1000</codeblock>
            </li>
         </ul>
         <p/>
         <p>
            <ph>HDP</ph>
         </p>
         <ul>
            <li>
               <p>
                  <ph>After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel Server host to
                     verify that the sensor is installed and configured correctly:</ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">/usr/bin/spark-submit \
--class org.apache.spark.examples.SparkPi --master yarn-client \
--num-executors 1 --driver-memory 512m --executor-memory 512m \
--executor-cores 1 /usr/hdp/current/spark-client/lib/spark-examples*.jar 10</codeblock>
            </li>
         </ul>
         <p>
            <ph>MapR</ph>
         </p>
         <ul>
            <li>
               <p>
                  <ph>After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel Server host to
                     verify that the sensor is installed and configured correctly:</ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">/opt/mapr/spark/spark-1.6.1/bin/spark-submit \
--class org.apache.spark.examples.SparkPi --master yarn-client \
--num-executors 1 --driver-memory 512m --executor-memory 512m \
--executor-cores 1 /opt/mapr/spark/spark-1.6.1/lib/spark-examples*.jar 10</codeblock>
            </li>
         </ul>
         <p>
            <ph>Running Benchmarks</ph>
         </p>
         <p>
            <ph>We provide sample Spark, MapReduce, Hive, and WF apps that you can download from </ph>
            <ph>
               <xref href="https://preview.unraveldata.com" scope="external" format="html" outputclass="external-link"
                  >preview.unraveldata.com</xref>. These apps are useful for verifying that an upgrade is successful. </ph>
            <ph>Please follow the instructions below for the app you want.</ph>
         </p>
         <p>
            <ph>Spark</ph>
         </p>
         <ol>
            <li>
               <p outputclass="auto-cursor-target">
                  <ph>
                     <ph>
                        <ph>Download our sample Spark app:</ph>
                     </ph>
                  </ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">curl https://preview.unraveldata.com/img/spark-benchmarks1.tgz -o spark-benchmarks1.tgz</codeblock>
               <p outputclass="auto-cursor-target">
                  <ph>This <codeph>.tgz</codeph> file includes both datasets and scripts.</ph>
               </p>
            </li>
            <li>
               <p outputclass="auto-cursor-target">
                  <ph>
                     <ph>
                        <ph>Run </ph>
                        <ph>md5sum</ph>
                        <ph> on spark-benchmarks1.tgz to ensure it is intact:</ph>
                     </ph>
                  </ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">md5sum spark-benchmarks1.tgz</codeblock>
            </li>
            <li>
               <p outputclass="auto-cursor-target">
                  <ph>
                     <ph>
                        <ph>Confirm that the output of </ph>
                        <ph>md5sum</ph>
                        <ph> is exactly as shown on the line below:</ph>
                     </ph>
                  </ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">ff8e56b4d5abfb0fb9f9e4a624eeb771  spark-benchmarks1.tgz</codeblock>
            </li>
            <li>
               <p outputclass="auto-cursor-target">
                  <ph>
                     <ph>
                        <ph>Uncompress the <codeph>.tgz</codeph> file:</ph>
                     </ph>
                  </ph>
               </p>
               <codeblock outputclass="syntaxhighlighter-pre">tar -zxvf spark-benchmarks1.tgz</codeblock>
            </li>
            <li>
               <p outputclass="auto-cursor-target">
                  <ph>
                     <ph>
                        <ph>Run the samples.</ph>
                     </ph>
                  </ph>
               </p>
               <ph outputclass="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"/>
               <p>
                  <ph>Tip: Instructions on how to run the samples are included in the package itself, inside
                     demo-benchmarks-for-spark/benchmarks/README.</ph>
               </p>
            </li>
            <li>
               <ph>
                  <ph>After running the samples, check the Program and the Execution Graph tabs in Unravel  Web UI.
                     Click an RDD in the Execution Graph to see the corresponding line of code in the app.</ph>
               </ph>
            </li>
         </ol>
      </context>
   </taskbody>
</task>
