<!DOCTYPE html>
<html>
    <head>
        <title>Unravel 4.0-4.1 : Running Verification Scripts and Benchmarks</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />

    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Unravel 4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="Unravel-4.0-4.1_50672724.html">Unravel 4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="Advanced-Topics_50688158.html">Advanced Topics</a></span>
                            </li>
                            <li>
                                <span><a href="Troubleshooting_50881320.html">Troubleshooting</a></span>
                            </li>
                        </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                        <span id="title-text">Running Verification Scripts and Benchmarks </span>
                    </h1>
                </div>
                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                        <p><span style="color: rgb(0,0,0);text-decoration: none;">This topic explains how to run
                                verification tests and benchmarks after you install or upgrade Unravel Server.
                            </span></p><h1
                            id="RunningVerificationScriptsandBenchmarks-WhyRunVerificationTestsorBenchmarks?"><span
                                style="color: rgb(0,0,0);text-decoration: none;">Why Run Verification Tests or
                                Benchmarks?</span></h1><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >Verification tests highlight the value of Unravel’s application performance
                                        management/analysis. </span></p></li>
                        </ul><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >Benchmarks verify that Unravel features are working correctly.</span></p></li>
                        </ul><h1 id="RunningVerificationScriptsandBenchmarks-RunningVerificationTests(“SmokeTests”)"
                                ><span style="color: rgb(0,0,0);text-decoration: none;">Running Verification Tests
                                (“Smoke Tests”)</span></h1><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                >Currently, we provide smoke tests for Spark jobs only. Please follow the instructions
                                in the section that matches your deployment.</span></p><h2
                            id="RunningVerificationScriptsandBenchmarks-CDH"><span
                                style="color: rgb(0,0,0);text-decoration: none;">CDH </span></h2><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >On your Unravel Server host, run the </span><span
                                        style="color: rgb(0,0,0);text-decoration: none;"
                                        >spark_test_via_parcel.sh</span><span
                                        style="color: rgb(0,0,0);text-decoration: none;"> script. This script runs a
                                        Spark app. It’s a good way to verify that Unravel Server captures the data
                                        (events) generated by the Spark app, even before you install and configure
                                        Unravel Sensor. You should be able to see the data generated by this Spark app
                                        on Unravel Web UI. </span></p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">/usr/local/unravel/install_bin/spark_test_via_parcel.sh --unravel-server &lt;unravel_host_IP_address&gt;</pre>
                                    </div></div></li>
                        </ul><p style="margin-left: 48.0px;"><span style="color: rgb(0,0,0);text-decoration: none;"
                                >Note: You can run this script without installing and configuring Unravel
                            Sensor.</span></p><p style="margin-left: 48.0px;"><br /></p><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel
                                        Server host to verify that the sensor is installed and configured
                                        correctly:</span></p><div class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">/opt/cloudera/parcels/CDH/lib/spark/bin/spark-submit \
--class org.apache.spark.examples.SparkPi \
--deploy-mode client \
--master yarn \
/opt/cloudera/parcels/CDH/lib/spark/examples/lib/spark-examples-*.jar 1000</pre>
                                    </div></div></li>
                        </ul><p style="margin-left: 48.0px;"><br /></p><h2
                            id="RunningVerificationScriptsandBenchmarks-HDP"><span
                                style="color: rgb(0,0,0);text-decoration: none;">HDP</span></h2><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel
                                        Server host to verify that the sensor is installed and configured
                                        correctly:</span></p><div class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">/usr/bin/spark-submit \
--class org.apache.spark.examples.SparkPi --master yarn-client \
--num-executors 1 --driver-memory 512m --executor-memory 512m \
--executor-cores 1 /usr/hdp/current/spark-client/lib/spark-examples*.jar 10</pre>
                                    </div></div></li>
                        </ul><h2 id="RunningVerificationScriptsandBenchmarks-MapR"><span
                                style="color: rgb(0,0,0);text-decoration: none;">MapR</span></h2><ul>
                            <li style="list-style-type: disc;"><p><span style="color: rgb(0,0,0);text-decoration: none;"
                                        >After you install Unravel Sensor for Spark, run a SparkPI job on your Unravel
                                        Server host to verify that the sensor is installed and configured
                                        correctly:</span></p><div class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">/opt/mapr/spark/spark-1.6.1/bin/spark-submit \
--class org.apache.spark.examples.SparkPi --master yarn-client \
--num-executors 1 --driver-memory 512m --executor-memory 512m \
--executor-cores 1 /opt/mapr/spark/spark-1.6.1/lib/spark-examples*.jar 10</pre>
                                    </div></div></li>
                        </ul><h1 id="RunningVerificationScriptsandBenchmarks-RunningBenchmarks"><span
                                style="color: rgb(0,0,0);text-decoration: none;">Running Benchmarks</span></h1><p><span
                                style="color: rgb(0,0,0);text-decoration: none;">We provide sample Spark, MapReduce,
                                Hive, and WF apps that you can download from </span><span
                                style="color: rgb(34,34,34);text-decoration: none;"><a
                                    href="https://preview.unraveldata.com" class="external-link" rel="nofollow"
                                    >preview.unraveldata.com</a>. These apps are useful for verifying that an upgrade is
                                successful. </span><span style="color: rgb(0,0,0);text-decoration: none;">Please follow
                                the instructions below for the app you want.</span></p><h2
                            id="RunningVerificationScriptsandBenchmarks-Spark"><span
                                style="color: rgb(0,0,0);text-decoration: none;">Spark</span></h2><ol>
                            <li><p class="auto-cursor-target"><span style="color: rgb(0,0,0);text-decoration: none;"
                                            ><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Download our sample
                                                Spark app:</span></span></span></p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">curl https://preview.unraveldata.com/img/spark-benchmarks1.tgz -o spark-benchmarks1.tgz</pre>
                                    </div></div><p class="auto-cursor-target"><span
                                        style="color: rgb(34,34,34);text-decoration: none;">This <code>.tgz</code> file
                                        includes both datasets and scripts.</span></p></li>
                            <li><p class="auto-cursor-target"><span style="color: rgb(0,0,0);text-decoration: none;"
                                            ><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Run </span><span
                                                style="color: rgb(34,34,34);text-decoration: none;">md5sum</span><span
                                                style="color: rgb(34,34,34);text-decoration: none;"> on
                                                spark-benchmarks1.tgz to ensure it is
                                    intact:</span></span></span></p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">md5sum spark-benchmarks1.tgz</pre>
                                    </div></div></li>
                            <li><p class="auto-cursor-target"><span style="color: rgb(0,0,0);text-decoration: none;"
                                            ><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Confirm that the
                                                output of </span><span
                                                style="color: rgb(34,34,34);text-decoration: none;">md5sum</span><span
                                                style="color: rgb(34,34,34);text-decoration: none;"> is exactly as shown
                                                on the line below:</span></span></span></p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">ff8e56b4d5abfb0fb9f9e4a624eeb771  spark-benchmarks1.tgz</pre>
                                    </div></div></li>
                            <li><p class="auto-cursor-target"><span style="color: rgb(0,0,0);text-decoration: none;"
                                            ><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Uncompress the
                                                    <code>.tgz</code> file:</span></span></span></p><div
                                    class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">tar -zxvf spark-benchmarks1.tgz</pre>
                                    </div></div></li>
                            <li><p class="auto-cursor-target"><span style="color: rgb(0,0,0);text-decoration: none;"
                                            ><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Run the
                                                samples.</span></span></span></p><div
                                    class="confluence-information-macro confluence-information-macro-tip"><span
                                        class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"
                                        ></span><div class="confluence-information-macro-body"><p><span
                                                style="color: rgb(34,34,34);text-decoration: none;">Tip: Instructions on
                                                how to run the samples are included in the package itself, inside
                                                demo-benchmarks-for-spark/benchmarks/README.</span></p></div></div></li>
                            <li><span style="color: rgb(0,0,0);text-decoration: none;"><span
                                        style="color: rgb(34,34,34);text-decoration: none;">After running the samples,
                                        check the Program and the Execution Graph tabs in Unravel  Web UI. Click an RDD
                                        in the Execution Graph to see the corresponding line of code in the
                                    app.</span></span></li>
                        </ol><p><br /></p><p><code><br /></code></p>
                    </div>
                    <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>
                        <div class="greybox">
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/logo.png">logo_small.png</a> (image/png) <br />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
