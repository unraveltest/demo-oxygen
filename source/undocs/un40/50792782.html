<!DOCTYPE html>
<html>
    <head>
        <title>Unravel 4.0-4.1 : Part 1: Install Unravel Server on CDH+CM</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />

    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Unravel 4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="Unravel-4.0-4.1_50672724.html">Unravel
                                    4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="50688254.html">Installation Guide for Cloudera
                                        Distribution Including Apache Hadoop (CDH), with Cloudera
                                        Manager (CM)</a></span>
                            </li>
                        </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                        <span id="title-text">Part 1: Install Unravel Server on
                            CDH+CM </span>
                    </h1>
                </div>
                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                        <h2 id="Part1:InstallUnravelServeronCDH+CM-Introduction">Introduction</h2><p
                            style="text-align: left;">This topic explains how to <span>deploy
                                Unravel Server 4.0 on a CDH gateway/edge node</span>. For
                            instructions that correspond to older versions of Unravel Server,
                            contact Unravel Support.</p><p><br /></p><div class="panel"
                            style="border-color: #94BEE5;border-style: dotted;border-width: 1px;"
                                ><div class="panelHeader"
                                style="border-bottom-width: 1px;border-bottom-style: dotted;border-bottom-color: #94BEE5;background-color: #94BEE5;"
                                    ><b>Workflow Summary</b></div><div class="panelContent">
                                <ol>
                                    <li>Pre-installation check</li>
                                    <li>Configure the host machine.</li>
                                    <li>Install the Unravel Server RPM on the host machine.</li>
                                    <li><p>Configure Unravel Server (basic/core options).</p></li>
                                    <li>Log into Unravel Web UI.</li>
                                    <li>(Optional) Configure Unravel Server (advanced options).</li>
                                </ol>
                            </div></div><div class="panel"
                            style="border-color: #94BEE5;border-style: dotted;border-width: 1px;"
                                ><div class="panelHeader"
                                style="border-bottom-width: 1px;border-bottom-style: dotted;border-bottom-color: #94BEE5;background-color: #94BEE5;"
                                    ><b>Table of Contents</b></div><div class="panelContent">
                                <div class="toc-macro rbtoc1548486123962">
                                    <ul class="toc-indentation">
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-Introduction"
                                                >Introduction</a></li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-Pre-InstallationCheck"
                                                >Pre-Installation Check</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-PlatformCompatibility"
                                                  >Platform Compatibility</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Hardware"
                                                  >Hardware</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Software"
                                                  >Software</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-AccessPermissions"
                                                  >Access Permissions</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Network"
                                                  >Network</a></li>
                                            </ul>
                                        </li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-1.ConfiguretheHostMachine"
                                                >1. Configure the Host Machine</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-AllocateaClusterGateway/Edge/ClientHostwithHDFSAccess"
                                                  >Allocate a Cluster Gateway/Edge/Client Host with
                                                  HDFS Access</a></li>
                                            </ul>
                                        </li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-2.InstalltheUnravelServerRPMontheHostMachine"
                                                >2. Install the Unravel Server RPM on the Host
                                                Machine</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-GettheUnravelServerRPM"
                                                  >Get the Unravel Server RPM</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-InstalltheUnravelServerRPM"
                                                  >Install the Unravel Server RPM</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-DoHost-SpecificPost-InstallationActions"
                                                  >Do Host-Specific Post-Installation
                                                  Actions</a></li>
                                            </ul>
                                        </li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-3.ConfigureUnravelServer(Basic/CoreOptions)"
                                                >3. Configure Unravel Server (Basic/Core
                                                Options)</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Enable/DisableOptionalDaemons"
                                                  >Enable/Disable Optional Daemons</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Modifyunravel.properties"
                                                  >Modify unravel.properties</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-IfKerberosisEnabled:"
                                                  >If Kerberos is Enabled:</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-IfSentryisEnabled:"
                                                  >If Sentry is Enabled:</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-DoHost-SpecificConfigurationSteps"
                                                  >Do Host-Specific Configuration Steps</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-RestartUnravelServer"
                                                  >Restart Unravel Server</a></li>
                                            </ul>
                                        </li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-4.LogintoUnravelWebUI"
                                                >4. Log into Unravel Web UI</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-Congratulations!"
                                                  >Congratulations!</a></li>
                                            </ul>
                                        </li>
                                        <li><a
                                                href="#Part1:InstallUnravelServeronCDH+CM-5.(Optional)ConfigureUnravelServer(AdvancedOptions)"
                                                >5. (Optional) Configure Unravel Server (Advanced
                                                Options)</a>
                                            <ul class="toc-indentation">
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-EnableAdditionalDataCollection/Instrumentation"
                                                  >Enable Additional Data
                                                  Collection/Instrumentation</a></li>
                                                <li><a
                                                  href="#Part1:InstallUnravelServeronCDH+CM-RuntheUnravelWebUIConfigurationWizard"
                                                  >Run the Unravel Web UI Configuration
                                                  Wizard</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div></div><h2
                            id="Part1:InstallUnravelServeronCDH+CM-Pre-InstallationCheck"
                            >Pre-Installation Check</h2><p>The following installation requirements
                            must be met for successful installation of Unravel.</p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-PlatformCompatibility">Platform
                            Compatibility</h3><ul>
                            <li>CDH 4.5 - 5.10</li>
                            <li>Hadoop 1.x - 2.x</li>
                            <li>Kerberos</li>
                            <li>Hive 0.9.x - 1.2.x</li>
                            <li>Spark 1.3.x - 2.0.x</li>
                        </ul><h3 id="Part1:InstallUnravelServeronCDH+CM-Hardware">Hardware</h3><ul>
                            <li>Architecture: x86_64</li>
                            <li>Cores: 8</li>
                            <li>RAM: 64GB minimum</li>
                            <li>Disk: <code>/usr/local/unravel</code> with 2.5GB free minimum</li>
                            <li>Disk: <code>/srv/unravel</code> with 500GB free minimum</li>
                            <li>For 10,000+ MR jobs per day, two or more gateway/edge nodes are
                                recommended</li>
                        </ul><h3 id="Part1:InstallUnravelServeronCDH+CM-Software">Software</h3><ul>
                            <li>Operating System: RedHat/Centos 6.4 - 7.3</li>
                            <li><code>libaio.x86_64</code> installed</li>
                            <li><code>SELINUX=permissive</code> (or disabled) should be set in
                                    <code>/etc/selinux/config</code></li>
                            <li>HDFS+Hive+YARN client/gateway, Hadoop and Hive commands in
                                    <code>PATH</code></li>
                            <li>If Spark is in use, Spark client gateway</li>
                            <li>LDAP (AD or Open LDAP) compatible for Unravel Web UI user
                                authentication (Open signup by default)</li>
                            <li>On Unravel Edge-node server, please <strong><u>do
                                not</u></strong> have zookeeper installed in same server</li>
                        </ul><p><br /></p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-AccessPermissions">Access
                            Permissions</h3><ul>
                            <li>If Kerberos is in use, a keytab for principal hdfs (or read-only
                                equivalent) is required for access to:<ul>
                                    <li>Access to YARN’s “done dir” in HDFS</li>
                                    <li>Access to YARN’s log aggregation directory in HDFS</li>
                                    <li>Access to Spark event log directory in HDFS</li>
                                    <li>Access to file sizes under HIve warehouse directory</li>
                                </ul></li>
                            <li>Access to YARN Resource Manager REST API<br /><ul>
                                    <li>principal needs right to find out which RM is active</li>
                                </ul></li>
                            <li>JDBC access to the Hive Metastore (read-only user is
                                sufficient)</li>
                        </ul><h3 id="Part1:InstallUnravelServeronCDH+CM-Network">Network</h3><ul>
                            <li>Port 3000 (or 4020) from users and entire cluster to Unravel Web
                                UI</li>
                            <li>HDFS ports open from Hadoop cluster to Unravel Server(s)</li>
                            <li>For MR1, TaskTracker port open from Hadoop cluster to Unravel
                                Server(s)</li>
                            <li>For MR1/YARN, Hive Metadata DB port open to Unravel Server(s) for
                                partition reporting</li>
                            <li>UDP and TCP port 4043 open from entire cluster to Unravel
                                Server(s)</li>
                            <li>For Oozie, port 11000 open from Unravel Server(s) to the Oozie
                                server</li>
                            <li>Resource Manager (RM) port 8032 from Unravel Server(s) to the RM
                                server(s)</li>
                            <li><span>Port 4176, 4181 through 4189, 3316, 4091 must be available for
                                    localhost communication between Unravel daemons or
                                    services</span></li>
                        </ul><p><br /></p><p><br /></p><h2
                            id="Part1:InstallUnravelServeronCDH+CM-1.ConfiguretheHostMachine">1.
                            Configure the Host Machine</h2><h3
                            id="Part1:InstallUnravelServeronCDH+CM-AllocateaClusterGateway/Edge/ClientHostwithHDFSAccess"
                            >Allocate a Cluster Gateway/Edge/Client Host with HDFS Access</h3><p>Use
                            Cloudera Manager to create the gateway configuration for the Unravel
                            server(s) that has client roles for HDFS, YARN, Spark, Hive.</p><h2
                            id="Part1:InstallUnravelServeronCDH+CM-2.InstalltheUnravelServerRPMontheHostMachine"
                            >2. Install the Unravel Server RPM on the Host Machine</h2><h3
                            id="Part1:InstallUnravelServeronCDH+CM-GettheUnravelServerRPM">Get the
                            Unravel Server RPM</h3><p>Copy the RPM from the Unravel distribution
                            server to the host machine using the username and password given to you
                            by Unravel Support:</p><ul>
                            <li><p class="auto-cursor-target">For the free trial version:</p><div
                                    class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">scp &quot;unraveltrial@trial.unraveldata.com:unravel-4.0-*.x86_64.rpm&quot; .</pre>
                                    </div></div></li>
                            <li>For the enterprise version:<div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">scp $USER@dist.unraveldata.com:unravel-4.0-*.x86_64.rpm.$timestamp .</pre>
                                    </div></div></li>
                        </ul><p>The precise RPM filename will vary. The version has the structure
                                    <em><code>x.y.b</code></em> where <em><code>b</code></em> is a
                            build number that is imposed as an RPM epoch which means it takes
                            precedence over version numbers for determining what is more up-to-date.
                            The Unravel build numbers always increase and are allocated so that they
                            respect the ordering of <em><code>x.y</code></em> versioning.</p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-InstalltheUnravelServerRPM"
                            >Install the Unravel Server RPM</h3><p>Replace the asterisks as needed
                            to be more selective.</p><div class="code panel pdl"
                            style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo rpm -U unravel-4.0*.x86_64.rpm*</pre>
                            </div></div><div
                            class="confluence-information-macro confluence-information-macro-information"
                                ><span
                                class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>The
                                    installation creates <code>/usr/local/unravel/</code> which
                                    contains the executables, scripts, and settings.
                                        User <code>unravel</code> is created. The initial internal
                                    database and other durable state are put
                                        in <code>/srv/unravel/</code> for larger storage. By
                                    default, the installation supports YARN. <br
                                        class="atl-forced-newline" /><br class="atl-forced-newline"
                                     /> The master configuration file is
                                        in <code>/usr/local/unravel/etc/unravel.properties</code>
                                    and the logs are in <code>/usr/local/unravel/logs/</code>. The
                                    RPM installation creates user <code>unravel</code> if it does
                                    not already exist; <code>/etc/init.d/unravel_*</code> scripts
                                    for controlling its services as well
                                        as <code>/etc/init.d/unravel_all.sh</code> which can be used
                                    to manually stop, start, and get status of all daemons in proper
                                    order. <br class="atl-forced-newline" /><br
                                        class="atl-forced-newline" /> The RPM installation also
                                    creates an HDFS directory for Hive Hook information collection.
                                        <br class="atl-forced-newline" /><br
                                        class="atl-forced-newline" /> During initial install, a
                                    bundled database is used. This can be switched to use an
                                    externally managed MySQL for production. (The bundled database
                                    root mysql password will be stored
                                        in <code>/root/unravel.install.include</code> during
                                    installation.)</p></div></div><h3
                            id="Part1:InstallUnravelServeronCDH+CM-DoHost-SpecificPost-InstallationActions"
                                ><span style="color: rgb(0,0,0);">Do Host-Specific Post-Installation
                                Actions</span></h3><p><span style="color: rgb(0,0,0);">For CDH,
                                there are no host-specific post-installation
                            actions.<br /></span></p><h2
                            id="Part1:InstallUnravelServeronCDH+CM-3.ConfigureUnravelServer(Basic/CoreOptions)"
                            >3. Configure Unravel Server (Basic/Core Options)</h2><h3
                            id="Part1:InstallUnravelServeronCDH+CM-Enable/DisableOptionalDaemons"
                            >Enable/Disable Optional Daemons</h3><p>Depending on your workload
                            volume or kind of activity, you can enable or disable optional daemons
                            at this point.</p><ul>
                            <li><p>If you are not using Oozie, disable
                                    <code>unravel_os3</code>:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo chkconfig unravel_os3 off</pre>
                                    </div></div></li>
                            <li><p>If you are not using Spark, disable
                                    <code>unravel_sw_1</code>:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo chkconfig unravel_sw_1 off</pre>
                                    </div></div></li>
                            <li><p>If you have 10000-20000 jobs per day, enable these
                                    workers:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo chkconfig --add unravel_ew_2 
sudo chkconfig --add unravel_hhw_2 
sudo chkconfig --add unravel_jcw2_2</pre>
                                    </div></div></li>
                            <li><p>If you have 20000-30000 jobs per day, enable these
                                    workers:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo chkconfig --add unravel_ew_3 
sudo chkconfig --add unravel_hhw_3 
sudo chkconfig --add unravel_jcw2_3</pre>
                                    </div></div></li>
                            <li><p>If you have more than 30000 jobs per day, enable these
                                    workers:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo chkconfig --add unravel_ew_4 
sudo chkconfig --add unravel_hhw_4 
sudo chkconfig --add unravel_jcw2_4</pre>
                                    </div></div></li>
                        </ul><h3 id="Part1:InstallUnravelServeronCDH+CM-Modifyunravel.properties"
                            >Modify <code>unravel.properties</code></h3><div
                            class="confluence-information-macro confluence-information-macro-tip"
                                ><span
                                class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>All values
                                    in unravel.properties can be modified through the in Unravel Web
                                    UI's configuration wizard, for CDH.  Furthermore, some
                                    properties can <em>only</em> be modified by running the
                                    configuration wizard. Therefore, for CDH, this section is
                                    optional.</p></div></div><ul>
                            <li><p>Open <span style="color: rgb(0,0,0);"
                                            ><code>/usr/local/unravel/etc/unravel.properties</code></span>
                                    with <code>vi</code>.</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo vi /usr/local/unravel/etc/unravel.properties</pre>
                                    </div></div></li>
                            <li>Edit the values in <span style="color: rgb(0,0,0);"
                                        ><code>unravel.properties</code></span> using the guidelines
                                and descriptions in the table below.</li>
                        </ul><div class="table-wrap"><table class="wrapped confluenceTable">
                                <colgroup>
                                    <col />
                                    <col />
                                    <col />
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th class="confluenceTh">Property</th>
                                        <th class="confluenceTh">Description</th>
                                        <th class="confluenceTh">Example</th>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"><code>
                                                com.unraveldata.advertised.url</code></td>
                                        <td colspan="1" class="confluenceTd">Defines the Unravel
                                            Server URL for HTTP traffic.</td>
                                        <td colspan="1" class="confluenceTd"><code>
                                                  com.unraveldata.advertised.url=<span
                                                  class="nolink"><span class="nolink">http://<span
                                                  style="color: rgb(255,0,0);"
                                                  >LAN_DNS</span>:3000</span></span></code></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"
                                                ><code>com.unraveldata.customer.organization</code></td>
                                        <td colspan="1" class="confluenceTd">Identifies your
                                            installation for reporting purposes.</td>
                                        <td colspan="1" class="confluenceTd"
                                                  ><code>com.unraveldata.customer.organization=<span
                                                  style="color: rgb(255,0,0);"
                                                  >Company_and_org</span></code></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"
                                                ><code>com.unraveldata.history.maxSize.weeks</code></td>
                                        <td colspan="1" class="confluenceTd">Sets retention for
                                            search data.</td>
                                        <td colspan="1" class="confluenceTd"
                                                ><code>com.unraveldata.history.maxSize.weeks=26</code></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"
                                                ><code>com.unraveldata.hive.hook.topic.num.threads</code></td>
                                        <td colspan="1" class="confluenceTd"
                                                ><strong>Optional</strong>. Defines the number of
                                            threads. Default is 1. Depending on job volume, increase
                                            this property to <em>N</em> where <em>N</em> is between
                                            1 and 4, or roughly <em>ThousandJobsPerDay</em>/10.</td>
                                        <td colspan="1" class="confluenceTd"
                                                ><code>com.unraveldata.hive.hook.topic.num.threads=1</code></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"><code>
                                                com.unraveldata.login.admins</code></td>
                                        <td colspan="1" class="confluenceTd">Defines the usernames
                                            that can access Unravel Web UI's admin pages. Default is
                                                <code>admin</code>.</td>
                                        <td colspan="1" class="confluenceTd"><code>
                                                com.unraveldata.login.admins=admin</code></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd"><code>
                                                com.unraveldata.s3.batch.monitoring.interval.sec</code></td>
                                        <td colspan="1" class="confluenceTd"
                                                ><strong>Optional</strong>. Defines the monitoring
                                            frequency. Default is 300 seconds (5 minutes). Set this
                                            property to 60 for lower latency.</td>
                                        <td colspan="1" class="confluenceTd"><code>
                                                com.unraveldata.s3.batch.monitoring.interval.sec=120</code></td>
                                    </tr>
                                </tbody>
                            </table></div><h3
                            id="Part1:InstallUnravelServeronCDH+CM-IfKerberosisEnabled:">If Kerberos
                            is Enabled:</h3><div id="expander-824308984" class="expand-container"
                                ><div id="expander-control-824308984" class="expand-control"><span
                                    class="expand-control-icon"><img style="vertical-align:middle;"
                                        class="expand-control-image"
                                        src="images/icons/grey_arrow_down.png" /></span><span
                                    class="expand-control-text">Add authentication for
                                    HDFS...</span></div><div id="expander-content-824308984"
                                class="expand-content"><p>(a) Create a keytab for unravel for
                                    daemons that run as <code>unravel</code> and put the file in
                                        <code>/usr/local/unravel/etc/unravel.keytab</code> (for
                                    example).</p><p>(b) Create a keytab for hdfs for the Unravel
                                    daemons that run as user <code>hdfs</code> and put the file in
                                        <code>/etc/keytabs/hdfs.keytab</code> (for
                                    example).</p><p>(c) Tell Unravel Server about it (env var for
                                    hdfs keytab location; substitute correct hostname):</p><div
                                    class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">echo &quot;export HDFS_KEYTAB_PATH=/etc/keytabs/hdfs.keytab 
export HDFS_KERBEROS_PRINCIPAL=hdfs/myhost.mydomain@MYREALM 
&quot; | sudo tee -a /usr/local/unravel/etc/unravel.ext.sh </pre>
                                    </div></div><p>(d) Add properties for Kerberos:</p><div
                                    class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">echo &quot;
com.unraveldata.kerberos.principal=unravel/myhost.mydomain@MYREALM
com.unraveldata.kerberos.keytab.path=/usr/local/unravel/etc/unravel.keytab
&quot; | sudo tee -a /usr/local/unravel/unravel.properties</pre>
                                    </div></div><p class="auto-cursor-target"><em>You can find the
                                        principal by using 'klist -kt
                            KEYTAB_FILE'</em></p></div></div><h3
                            id="Part1:InstallUnravelServeronCDH+CM-IfSentryisEnabled:">If Sentry is
                            Enabled:</h3><div id="expander-189794869" class="expand-container"><div
                                id="expander-control-189794869" class="expand-control"><span
                                    class="expand-control-icon"><img style="vertical-align:middle;"
                                        class="expand-control-image"
                                        src="images/icons/grey_arrow_down.png" /></span><span
                                    class="expand-control-text">Add these
                                permissions...</span></div><div id="expander-content-189794869"
                                class="expand-content"><div class="table-wrap"><table
                                        class="wrapped confluenceTable">
                                        <colgroup>
                                            <col />
                                            <col />
                                            <col />
                                            <col />
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <th class="confluenceTh">Resource</th>
                                                <th class="confluenceTh">Principal</th>
                                                <th class="confluenceTh">Access</th>
                                                <th colspan="1" class="confluenceTh">Purpose</th>
                                            </tr>
                                            <tr>
                                                <td class="confluenceTd"
                                                  ><code>hdfs://user/unravel/HOOK_RESULT_DIR</code></td>
                                                <td class="confluenceTd">*</td>
                                                <td class="confluenceTd">read+write</td>
                                                <td colspan="1" class="confluenceTd">data transfer
                                                  from Hive jobs when Unravel is not up</td>
                                            </tr>
                                            <tr>
                                                <td colspan="1" class="confluenceTd"
                                                  ><code><span>hdfs://user/spark/applicationHistory</span></code></td>
                                                <td colspan="1" class="confluenceTd">hdfs</td>
                                                <td colspan="1" class="confluenceTd">read</td>
                                                <td colspan="1" class="confluenceTd">Spark event
                                                  log</td>
                                            </tr>
                                            <tr>
                                                <td colspan="1" class="confluenceTd"
                                                  ><code><span>hdfs://usr/history/done</span></code></td>
                                                <td colspan="1" class="confluenceTd">hdfs</td>
                                                <td colspan="1" class="confluenceTd">read</td>
                                                <td colspan="1" class="confluenceTd">MapReduce
                                                  logs</td>
                                            </tr>
                                            <tr>
                                                <td colspan="1" class="confluenceTd"
                                                  ><code><span>hdfs://tmp/logs</span></code></td>
                                                <td colspan="1" class="confluenceTd">hdfs</td>
                                                <td colspan="1" class="confluenceTd">read</td>
                                                <td colspan="1" class="confluenceTd">YARN
                                                  aggregation folder</td>
                                            </tr>
                                            <tr>
                                                <td colspan="1" class="confluenceTd"
                                                  ><code><span>hdfs://user/hive/warehouse</span></code></td>
                                                <td colspan="1" class="confluenceTd">hdfs</td>
                                                <td colspan="1" class="confluenceTd">read</td>
                                                <td colspan="1" class="confluenceTd">Obtain table
                                                  partition sizes</td>
                                            </tr>
                                            <tr>
                                                <td colspan="1" class="confluenceTd">Hive Metastore
                                                  GRANT</td>
                                                <td colspan="1" class="confluenceTd">hive</td>
                                                <td colspan="1" class="confluenceTd">read</td>
                                                <td colspan="1" class="confluenceTd">Hive table
                                                  information</td>
                                            </tr>
                                        </tbody>
                                    </table></div></div></div><h3
                            id="Part1:InstallUnravelServeronCDH+CM-DoHost-SpecificConfigurationSteps"
                            >Do Host-Specific Configuration Steps</h3><p><span
                                style="color: rgb(0,0,0);">For CDH, there are no host-specific
                                configuration steps.</span></p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-RestartUnravelServer">Restart
                            Unravel Server</h3><p>After edits to
                                <code>com.unraveldata.login.admins</code> in
                                <code>/usr/local/unravel/etc/unravel.properties</code> it is
                            necessary to run the following script in order to make changes take
                            effect. The <code>echo</code> command shows the page to visit with your
                            browser. If you are using an ssh tunnel or http proxy, you might need to
                            make adjustments.</p><div class="code panel pdl"
                            style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo /etc/init.d/unravel_all.sh start
sleep 60
echo &quot;http://$(hostname -f):3000/&quot;</pre>
                            </div></div><p>This completes the basic/core configuration.</p><h2
                            id="Part1:InstallUnravelServeronCDH+CM-4.LogintoUnravelWebUI">4. Log
                            into Unravel Web UI</h2><p style="text-align: left;">Using a web
                            browser, navigate to <code><span class="nolink">http://($hostname</span>
                                -f):3000</code> and login as user &quot;<code>admin&quot;</code>
                            with password <code>&quot;unraveldata</code>&quot;.</p><div
                            class="confluence-information-macro confluence-information-macro-note"
                                ><span
                                class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>For the
                                    free trial version, use the Chrome web
                            browser.</p></div></div><p style="text-align: left;"><span
                                class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"
                                    ><img class="confluence-embedded-image image-center"
                                    height="250" src="media/50876015.png"
                                    data-image-src="media/50876015.png"
                                    data-unresolved-comment-count="0"
                                    data-linked-resource-id="50876015"
                                    data-linked-resource-version="1"
                                    data-linked-resource-type="attachment"
                                    data-linked-resource-default-alias="image2017-2-26_0-20-12.png"
                                    data-base-url="https://unraveldata.atlassian.net/wiki"
                                    data-linked-resource-content-type="image/png"
                                    data-linked-resource-container-id="50792782"
                                    data-linked-resource-container-version="98"
                                    data-media-id="4169e27f-3948-40a6-8157-14dd18f69b1b"
                                    data-media-type="file" /></span></p><p
                            style="text-align: center;"><em>Unravel Web UI Login Screen</em></p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-Congratulations!"
                            >Congratulations!</h3><p>Unravel Server is up and running. Unravel Web
                            UI displays collected data. For instructions on using Unravel Web UI,
                            see the <a href="User-Guide_50687944.html"
                                data-linked-resource-id="50687944" data-linked-resource-version="49"
                                data-linked-resource-type="page">User Guide</a>.</p><h2
                            id="Part1:InstallUnravelServeronCDH+CM-5.(Optional)ConfigureUnravelServer(AdvancedOptions)"
                            >5. (Optional) Configure Unravel Server (Advanced Options)</h2><h3
                            id="Part1:InstallUnravelServeronCDH+CM-EnableAdditionalDataCollection/Instrumentation"
                            >Enable Additional Data Collection/Instrumentation</h3><p>Install the
                            Unravel Sensor Parcel on gateway/edge/client nodes that are used to
                            submit Hive queries to push additional information to Unravel Server.
                            For details, see <a href="50689256.html"
                                data-linked-resource-id="50689256" data-linked-resource-version="66"
                                data-linked-resource-type="page">Part 2: Install Unravel Sensor
                                Parcel on CDH+CM</a>.</p><h3
                            id="Part1:InstallUnravelServeronCDH+CM-RuntheUnravelWebUIConfigurationWizard"
                            >Run the Unravel Web UI Configuration Wizard</h3><p>Run the Unravel Web
                            UI configuration wizard to choose additional configuration options. For
                            instructions on configuring advanced options, see the <a
                                href="User-Guide_50687944.html" data-linked-resource-id="50687944"
                                data-linked-resource-version="49" data-linked-resource-type="page"
                                >User Guide</a>.</p><p><br /></p>
                    </div>
                    <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>
                        <div class="greybox">
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/logo.png">worddav95f1e8fd13958fae391afc8e6f9ad03d.png</a>
                            (image/png) <br />
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/50876015.png">image2017-2-26_0-20-12.png</a> (image/png) <br />
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/logo.png">logo_small.png</a> (image/png) <br />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
