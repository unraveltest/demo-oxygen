<!DOCTYPE html>
<html>
    <head>
        <title>Unravel 4.0-4.1 : Setting Up Email for Auto Actions and Collaboration</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />

    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Unravel 4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="Unravel-4.0-4.1_50672724.html">Unravel 4.0-4.1</a></span>
                            </li>
                            <li>
                                <span><a href="Advanced-Topics_50688158.html">Advanced Topics</a></span>
                            </li>
                            <li>
                                <span><a href="Custom-Configurations_54044915.html">Custom Configurations</a></span>
                            </li>
                        </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                        <span id="title-text">Setting Up Email for Auto Actions and Collaboration
                        </span>
                    </h1>
                </div>
                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                        <p>You can specify an SMTP server for Unravel Server so that it can send reports, alerts, and
                            collaboration emails. Several examples are shown below. Adapt the one that is most similar
                            to your environment.</p><p>You can set these values through Unravel Web UI's
                                <strong>Manage</strong> page | <strong>Configuration</strong> | <strong>Email</strong>
                            side tab as shown in diagram. The <strong>Web UI</strong> column in the table below
                            corresponds to the values in the Unravel Web UI dialog box.</p><p><span
                                class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img
                                    class="confluence-embedded-image" height="250" src="media/52731267.png"
                                    data-image-src="media/52731267.png" data-unresolved-comment-count="0"
                                    data-linked-resource-id="52731267" data-linked-resource-version="1"
                                    data-linked-resource-type="attachment"
                                    data-linked-resource-default-alias="Unravel_email_setup.png"
                                    data-base-url="https://unraveldata.atlassian.net/wiki"
                                    data-linked-resource-content-type="image/png"
                                    data-linked-resource-container-id="51162243"
                                    data-linked-resource-container-version="37"
                                    data-media-id="54092cc3-fe56-4a77-80d9-0d2d5f032f6a" data-media-type="file"
                                 /></span></p><p>An alternative to using Unravel Web UI's <strong>Manage</strong> page
                            is to enter the settings into <code>/usr/local/unravel/etc/unravel.properties</code>
                            using the property name shown in the <strong>Property</strong> column.</p><div
                            class="confluence-information-macro confluence-information-macro-note"><span
                                class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>If you specify a saved email
                                    setting in Unravel Web UI, that setting overrides the corresponding setting in the
                                        <code>unravel.properties</code> file.</p></div></div><h3
                            id="SettingUpEmailforAutoActionsandCollaboration-Defaults">Defaults</h3><p>When you do not
                            specify properties or configuration settings, Unravel Server tries to use the default
                            'classic' SMTP setting at localhost:25 ; this sometimes works for customers that set up
                            SMTP spooling with sendmail or postfix, but it might block emails to external domains (for
                            anti-spam reasons). On EC2, this sometimes works for small emails, but significant use is
                            blocked for anti-spam reasons.</p><div class="table-wrap"><table
                                class="wrapped confluenceTable">
                                <colgroup>
                                    <col />
                                    <col style="width: 172.0px;" />
                                    <col style="width: 190.0px;" />
                                    <col style="width: 415.0px;" />
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th colspan="1" class="confluenceTh">Web UI</th>
                                        <th class="confluenceTh">Property</th>
                                        <th class="confluenceTh">Value</th>
                                        <th colspan="1" class="confluenceTh">Description</th>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">PORT</td>
                                        <td class="confluenceTd">mail.smtp.port</td>
                                        <td class="confluenceTd">25</td>
                                        <td colspan="1" class="confluenceTd">Port</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">AUTHENTICATE</td>
                                        <td class="confluenceTd">mail.smtp.auth</td>
                                        <td class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd">Enable SMTP authentication? If true, then
                                            USER (mail.smtp.user) and USER PASSWORD (<a href="http://mail.smtp.pw"
                                                class="external-link" rel="nofollow">mail.smtp.pw</a>) are used when
                                            connecting</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">START TLS</td>
                                        <td class="confluenceTd">mail.smtp.starttls.enable</td>
                                        <td class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd">Use start-TLS?</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">SSL ENABLE</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.ssl.enable</td>
                                        <td colspan="1" class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd">Use SSL right from the start?</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">USER</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.user</td>
                                        <td colspan="1" class="confluenceTd">null</td>
                                        <td colspan="1" class="confluenceTd">Username for SMTP authentication</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">USER PASSWORD</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.pw</td>
                                        <td colspan="1" class="confluenceTd">null</td>
                                        <td colspan="1" class="confluenceTd"><span>Password<span> for SMTP
                                                    authentication</span></span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">HOST</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.host</td>
                                        <td colspan="1" class="confluenceTd"><p class="p1"><span class="s1"><a
                                                        href="http://smtp.gmail.com/" class="external-link"
                                                        rel="nofollow">l</a>ocalhost</span></p></td>
                                        <td colspan="1" class="confluenceTd">Host for SMTP server</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">FROM USER</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.from</td>
                                        <td colspan="1" class="confluenceTd"><span>someone<a
                                                    href="mailto:someone@example.com" class="external-link"
                                                    rel="nofollow">@example.com</a></span></td>
                                        <td colspan="1" class="confluenceTd">Use a <code>From:</code> name that is
                                            appropriate for your environment</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">LOCALHOST</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.localhost</td>
                                        <td colspan="1" class="confluenceTd">localhost.local</td>
                                        <td colspan="1" class="confluenceTd">A domain name for apparent sender; must
                                            have at least one dot (e.g. organization.com)</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">DEBUG</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.debug</td>
                                        <td colspan="1" class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd"><p>Enable debug mode? Set to true
                                                (temporarily) to see more details in logs.</p></td>
                                    </tr>
                                </tbody>
                            </table></div><h3 id="SettingUpEmailforAutoActionsandCollaboration-GMailSMTPExample">GMail
                            SMTP Example</h3><p>These settings are for our internal use. Do <strong>not</strong> compile
                            this into the product or otherwise use as a default in our source code. For security
                            reasons, we don't want to mix our internal testing SMTP (or POP) with the external
                            one. </p><div class="table-wrap"><table class="wrapped confluenceTable">
                                <colgroup>
                                    <col />
                                    <col style="width: 172.0px;" />
                                    <col style="width: 190.0px;" />
                                    <col style="width: 415.0px;" />
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th colspan="1" class="confluenceTh">Config Label</th>
                                        <th class="confluenceTh">Property</th>
                                        <th class="confluenceTh">Value</th>
                                        <th colspan="1" class="confluenceTh">Description</th>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">PORT</td>
                                        <td class="confluenceTd">mail.smtp.port</td>
                                        <td class="confluenceTd">587</td>
                                        <td colspan="1" class="confluenceTd">Port</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">AUTHENTICATE</td>
                                        <td class="confluenceTd">mail.smtp.auth</td>
                                        <td class="confluenceTd">true</td>
                                        <td colspan="1" class="confluenceTd">Enable SMTP authentication?</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">START TLS</td>
                                        <td class="confluenceTd">mail.smtp.starttls.enable</td>
                                        <td class="confluenceTd">true</td>
                                        <td colspan="1" class="confluenceTd">Use start-TLS?</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">SSL ENABLE</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.ssl.enable</td>
                                        <td colspan="1" class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd">Use SSL right from the start?</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">USER</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.user</td>
                                        <td colspan="1" class="confluenceTd"><a href="mailto:daemon@unraveldata.com"
                                                class="external-link" rel="nofollow">s</a>omeone@organization.com</td>
                                        <td colspan="1" class="confluenceTd">Username for SMTP authentication</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">USER PASSWORD</td>
                                        <td colspan="1" class="confluenceTd"><a href="http://mail.smtp.pw"
                                                class="external-link" rel="nofollow">mail.smtp.pw</a></td>
                                        <td colspan="1" class="confluenceTd">********</td>
                                        <td colspan="1" class="confluenceTd">Password<span> for SMTP
                                                authentication</span></td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">HOST</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.host</td>
                                        <td colspan="1" class="confluenceTd"><p class="p1"><span class="s1"><a
                                                        href="http://smtp.gmail.com" class="external-link"
                                                        rel="nofollow">smtp.gmail.com</a></span></p></td>
                                        <td colspan="1" class="confluenceTd">Host for SMTP server</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">FROM USER</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.from</td>
                                        <td colspan="1" class="confluenceTd">someone@example.com</td>
                                        <td colspan="1" class="confluenceTd">This sets the From header</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">LOCALHOST</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.localhost</td>
                                        <td colspan="1" class="confluenceTd"><a href="http://unraveldata.com"
                                                class="external-link" rel="nofollow">e</a>xample.com</td>
                                        <td colspan="1" class="confluenceTd">A domain name for apparent sender; must
                                            have at least one dot</td>
                                    </tr>
                                    <tr>
                                        <td colspan="1" class="confluenceTd">DEBUG</td>
                                        <td colspan="1" class="confluenceTd">mail.smtp.debug</td>
                                        <td colspan="1" class="confluenceTd">false</td>
                                        <td colspan="1" class="confluenceTd">Enable debug mode? Set to true
                                            (temporarily) to see more details in logs. Debug mode under &quot;Advance
                                            SMTP&quot; section</td>
                                    </tr>
                                </tbody>
                            </table></div><h2
                            id="SettingUpEmailforAutoActionsandCollaboration-Unraveldaemonstorestartafteremailsetup"
                            >Unravel daemons to restart after email setup</h2><p>Run the following commands on Unravel
                            Server:</p><div class="code panel pdl" style="border-width: 1px;"><div
                                class="codeContent panelContent pdl">
                                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo /etc/init.d/unravel_tc restart 
sudo /etc/init.d/unravel_all.sh stop-etl
sudo /etc/init.d/unravel_all.sh start</pre>
                            </div></div><p><br /></p><h2
                            id="SettingUpEmailforAutoActionsandCollaboration-Verifyemailsetupworks">Verify email setup
                            works</h2><p>Run the following commands on Unravel Server:</p><div class="code panel pdl"
                            style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo -u unravel /usr/local/unravel/install_bin/diag_email.sh   someone@example.com 
--&gt; enter password from dist.unraveldata.com
--&gt; should see following output in terminal mode and if you see &quot;result is = null&quot;, then, setup is correct.
:
:
result is = null
At least one smtp pathway worked
for log output see /usr/local/unravel/logs/test_email.log</pre>
                            </div></div><div
                            class="confluence-information-macro confluence-information-macro-information"><span
                                class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>See the stdout. It will test
                                    smtp settings (either from unravel.properties or defaults or in settings table in db
                                    or command line overrides). It will also test &quot;smtp2&quot; email which is
                                    compiled-in as a backup for alerts to Unravel Support. Customer reports
                                        are <strong>not</strong> send via smtp2, so if only that one works, customer
                                    report email is not going to work.</p></div></div><h2
                            id="SettingUpEmailforAutoActionsandCollaboration-EmailsetupforAuto-Actions">Email setup for
                            Auto-Actions</h2><div
                            class="confluence-information-macro confluence-information-macro-information"><span
                                class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"
                                ></span><div class="confluence-information-macro-body"><p>After above email setup has
                                    been completed in Unravel UI under Email Config Wizard, next, please do below steps
                                    to configure Auto-Actions.</p></div></div><ol>
                            <li><p class="auto-cursor-target">Add following properties to
                                    /usr/local/unravel/unravel.properties on Unravel Server:</p><div
                                    class="code panel pdl" style="border-width: 1px;"><div
                                        class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">mail.smtp.from=someone@example.com
com.unraveldata.report.user.email.domain=example.com</pre>
                                    </div></div></li>
                            <li><p class="auto-cursor-target">Disable unneeded daemons:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo service unravel_os3 stop
sudo chkconfig unravel_os3 off</pre>
                                    </div></div></li>
                            <li><p class="auto-cursor-target">Restart daemons:</p><div class="code panel pdl"
                                    style="border-width: 1px;"><div class="codeContent panelContent pdl">
                                        <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">sudo /etc/init.d/unravel_all.sh restart</pre>
                                    </div></div></li>
                        </ol><p><br /></p>
                    </div>
                    <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>
                        <div class="greybox">
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/51162247.png">logo_small.png</a> (image/png) <br />
                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt="" />
                            <a href="media/52731267.png">Unravel_email_setup.png</a> (image/png) <br />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
